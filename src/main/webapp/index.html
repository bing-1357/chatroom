<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>聊天室登录</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

        <div class="login-container" id="app">
            <h2>聊天室登录</h2>
            <div id="loginForm">
                <div class="form-group">
                    <input type="text" id="account"
                           name="account"
                           v-model="users.account"
                           placeholder="账号"
                           required>
                </div>
                <div class="form-group">
                    <input type="password" id="password" name="password" placeholder="密码"
                           v-model="users.pwd"
                           required>
                </div>
                <button @click="login">登录</button>
            </div>
            <p>还没有账号？<a href="register.html">立即注册</a></p>
        </div>

    <script src="js/vue.js"></script>
    <script src="js/axios.js"></script>
    <script>
        const app = new Vue({
            el: '#app',
            data: {
                users: {
                    account: '',
                    pwd: ''
                }
            },
            methods: {
                login() {
                    var params = new URLSearchParams(this.users);
                    axios.post('login.action?op=login', params).then(res => {
                        console.log(res);
                        const json = res.data;
                        if (json.code == 1) {
                            window.location.href = 'chat.html';
                        } else {
                            alert("登录失败");
                        }
                    });
                }
            }
        });
    </script>

</body>
</html> 